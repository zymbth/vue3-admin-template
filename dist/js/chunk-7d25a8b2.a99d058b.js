(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7d25a8b2"],{"9ed6":function(e,t,n){"use strict";n.r(t);var o=n("8bbf"),i=e=>(Object(o.pushScopeId)("data-v-dae26d2e"),e=e(),Object(o.popScopeId)(),e);const s={class:"login-container"},a={class:"login-box"},r=i(()=>Object(o.createElementVNode)("h2",null,"登录",-1)),c={class:"user-box"},l={class:"user-box"},d=["type"],p={class:"verify-code"},m={key:2},h=[i(()=>Object(o.createElementVNode)("span",null,null,-1)),i(()=>Object(o.createElementVNode)("span",null,null,-1)),i(()=>Object(o.createElementVNode)("span",null,null,-1)),i(()=>Object(o.createElementVNode)("span",null,null,-1)),Object(o.createTextVNode)("登录")];n("14d9"),n("61f7");var u=n("c24f"),b=(i=n("323e"),n.n(i)),g=(i=(n("a5d8"),{name:"Login",data(){return{options:{type:"origin",typeName:"手机验证码登录",username:"用户名",password:"密码"},loginForm:{username:"",password:""},redirect:void 0,codeAvailable:!0,restSec:60,interval:60}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},computed:{codeVisible(){return"phone"===this.options.type&&this.loginForm.username&&/^((\+86)|(86))?(1[3-9])\d{9}$/.test(this.loginForm.username)}},methods:{async handleLogin(){if("origin"===this.options.type){if(this.loginForm.username.length<3)return void this.$message.error("用户名不正确");if(this.loginForm.password.length<6)return void this.$message.error("请输入最少六位密码")}else if(this.loginForm.password.length<4)return void this.$message.error("请输入正确的校验码");this.loginForm.type="origin"===this.options.type?"name":"tel",b.a.start(),await this.$store.dispatch("user/login",this.loginForm).catch(e=>this.$message.error(e.message)),b.a.done(),this.$router.push({path:this.redirect||"/"})},changeLoginType(){"origin"===this.options.type?this.options={type:"phone",typeName:"用户名/密码登录",username:"手机号",password:"验证码"}:this.options={type:"origin",typeName:"手机验证码登录",username:"用户名",password:"密码"}},getCode(){Object(u.a)(this.loginForm.username).then(e=>{this.codeAvailable=!1,this.restSec=this.interval;let t=setInterval(()=>{this.restSec--},1e3);setTimeout(()=>{this.codeAvailable=!0,window.clearInterval(t)},1e3*this.interval),this.$message.success("短信已发送，注意查收！")})},warningPhone(){this.$message.info("请输入正确的手机号")}}}),n("cf4a"),n("6b0d"));n=n.n(g);t.default=n()(i,[["render",function(e,t,n,i,u,b){return Object(o.openBlock)(),Object(o.createElementBlock)("div",s,[Object(o.createElementVNode)("div",a,[r,Object(o.createElementVNode)("form",null,[Object(o.createElementVNode)("div",c,[Object(o.withDirectives)(Object(o.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.loginForm.username=e),type:"text",name:"",required:""},null,512),[[o.vModelText,u.loginForm.username]]),Object(o.createElementVNode)("label",null,Object(o.toDisplayString)(u.options.username),1)]),Object(o.createElementVNode)("div",l,[Object(o.withDirectives)(Object(o.createElementVNode)("input",{onKeyup:t[1]||(t[1]=Object(o.withKeys)((...e)=>b.handleLogin&&b.handleLogin(...e),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=e=>u.loginForm.password=e),type:"phone"===u.options.type?"text":"password",name:"",required:""},null,40,d),[[o.vModelDynamic,u.loginForm.password]]),Object(o.createElementVNode)("label",null,Object(o.toDisplayString)(u.options.password),1),Object(o.withDirectives)(Object(o.createElementVNode)("div",p,[b.codeVisible?u.codeAvailable?(Object(o.openBlock)(),Object(o.createElementBlock)("a",{key:1,onClick:t[4]||(t[4]=(...e)=>b.getCode&&b.getCode(...e))},"获取验证码")):(Object(o.openBlock)(),Object(o.createElementBlock)("span",m,Object(o.toDisplayString)(u.restSec),1)):(Object(o.openBlock)(),Object(o.createElementBlock)("a",{key:0,onClick:t[3]||(t[3]=(...e)=>b.warningPhone&&b.warningPhone(...e)),"data-disabled":""},"获取验证码"))],512),[[o.vShow,"phone"===u.options.type]])]),Object(o.createElementVNode)("a",{class:"change-login",onClick:t[5]||(t[5]=(...e)=>b.changeLoginType&&b.changeLoginType(...e))},Object(o.toDisplayString)(u.options.typeName),1),Object(o.createElementVNode)("a",{id:"submit-btn",onClick:t[6]||(t[6]=(...e)=>b.handleLogin&&b.handleLogin(...e))},h)])])])}],["__scopeId","data-v-dae26d2e"]])},c8ce:function(e,t,n){},cf4a:function(e,t,n){"use strict";n("c8ce")}}]);